{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgiiisavich/Desktop/assist_plus/src/app/components/Avatar.tsx"],"sourcesContent":["import React from 'react';\n\nconst getInitials = (firstName: string, lastName: string | null) => {\n  const firstInitial = firstName ? firstName[0] : '';\n  const lastInitial = lastName ? lastName[0] : '';\n  return `${firstInitial}${lastInitial}`.toUpperCase();\n};\n\nconst avatarColors = [\n  '#ef4444', '#f97316', '#eab308', \n  '#84cc16', '#22c55e', '#10b981', \n  '#06b6d4', '#3b82f6', '#8b5cf6', \n  '#d946ef', '#ec4899'\n];\n\ninterface AvatarProps {\n  firstName: string;\n  lastName: string | null;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nconst Avatar: React.FC<AvatarProps> = ({ firstName, lastName, className = '', style }) => {\n  const initials = getInitials(firstName, lastName);\n\n  const colorIndex = (firstName.charCodeAt(0) || 0) % avatarColors.length;\n  const backgroundColor = avatarColors[colorIndex];\n\n  return (\n    <div\n      className={`w-16 h-16 rounded-full flex items-center justify-center \n                  bg-gray-300 text-white font-bold text-lg border-2 border-white \n                  flex-shrink-0 ${className}`}\n      style={{ backgroundColor, ...style }}\n      title={`${firstName} ${lastName || ''}`}\n    >\n      {initials}\n    </div>\n  );\n};\n\nexport default Avatar;"],"names":[],"mappings":";;;;;AAEA,MAAM,cAAc,CAAC,WAAmB;IACtC,MAAM,eAAe,YAAY,SAAS,CAAC,EAAE,GAAG;IAChD,MAAM,cAAc,WAAW,QAAQ,CAAC,EAAE,GAAG;IAC7C,OAAO,GAAG,eAAe,aAAa,CAAC,WAAW;AACpD;AAEA,MAAM,eAAe;IACnB;IAAW;IAAW;IACtB;IAAW;IAAW;IACtB;IAAW;IAAW;IACtB;IAAW;CACZ;AASD,MAAM,SAAgC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE;IACnF,MAAM,WAAW,YAAY,WAAW;IAExC,MAAM,aAAa,CAAC,UAAU,UAAU,CAAC,MAAM,CAAC,IAAI,aAAa,MAAM;IACvE,MAAM,kBAAkB,YAAY,CAAC,WAAW;IAEhD,qBACE,6LAAC;QACC,WAAW,CAAC;;gCAEc,EAAE,WAAW;QACvC,OAAO;YAAE;YAAiB,GAAG,KAAK;QAAC;QACnC,OAAO,GAAG,UAAU,CAAC,EAAE,YAAY,IAAI;kBAEtC;;;;;;AAGP;KAjBM;uCAmBS","debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgiiisavich/Desktop/assist_plus/src/app/%28main%29/friends/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Avatar from '../../components/Avatar';\nimport Image from 'next/image';\n\ntype UserProfile = {\n  id: number;\n  balance_crystals: number;\n};\n\ntype Referral = {\n  id: number;\n  first_name: string;\n  last_name: string | null;\n};\nconst MY_ICON_PATH = '/images/134.png';\n\nexport default function FriendsPage() {\n  const [user, setUser] = useState<UserProfile | null>(null);\n  const [referrals, setReferrals] = useState<Referral[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const tg = window.Telegram?.WebApp;\n    if (tg) {\n      tg.ready();\n      const initData = tg.initData;\n      fetch('/api/auth', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ initData }),\n      })\n      .then(response => {\n        if (!response.ok) throw new Error(`Ошибка аутентификации: ${response.statusText}`);\n        return response.json();\n      })\n      .then(userData => {\n        if (userData && userData.error) {\n          throw new Error(userData.error);\n        }\n        setUser(userData);\n        return fetch('/api/referrals', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ initData }),\n        });\n      })\n      .then(response => {\n        if (response) {\n          if (!response.ok) throw new Error(`Ошибка загрузки друзей: ${response.statusText}`);\n          return response.json();\n        }\n      })\n      .then(referralsData => {\n        if (referralsData) {\n          setReferrals(referralsData);\n        }\n      })\n      .catch(err => {\n        console.error(\"Fetch error on friends page:\", err);\n        setError(err.message || \"Не удалось загрузить данные.\");\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n    } else {\n        setError(\"Telegram WebApp не найден. Откройте приложение в Telegram.\");\n        setLoading(false);\n    }\n  }, []);\n\n  const handleInviteClick = () => {\n    const tg = window.Telegram?.WebApp;\n    if (!tg || !user || !user.id) {\n        console.error(\"User data or Telegram WebApp is not available.\");\n        tg?.showAlert('Не удалось создать ссылку. Попробуйте перезагрузить страницу.');\n        return;\n    }\n    const botUsername = process.env.NEXT_PUBLIC_TELEGRAM_BOT_USERNAME;\n    const botName = process.env.NEXT_PUBLIC_TELEGRAM_BOT_NAME;\n    if (!botUsername || !botName) {\n        console.error(\"Bot username or app name is not set in .env.local\");\n        tg?.showAlert('Ошибка конфигурации приложения.');\n        return;\n    }\n    const referralLink = `https://t.me/${botUsername}/${botName}?startapp=ref_${user.id}`;\n    const shareText = `Привет! Присоединяйся к \"Ассист+\" и получай бонусы. Поможем друг другу найти крутые знакомства и возможности!`;\n    const shareUrl = `https://t.me/share/url?url=${encodeURIComponent(referralLink)}&text=${encodeURIComponent(shareText)}`;\n  \n    tg.openTelegramLink(shareUrl);\n  };\n\n  const iconMaskStyle = (iconPath: string) => ({\n    maskImage: `url(${iconPath})`,\n    WebkitMaskImage: `url(${iconPath})`,\n    maskSize: 'contain',\n    maskRepeat: 'no-repeat',\n    maskPosition: 'center',\n  });\n\n  if (loading) {\n    return <div className=\"flex justify-center items-center h-screen bg-white\">Загрузка...</div>;\n  }\n\n  if (error) {\n    return <div className=\"p-4 text-center text-red-500\">Ошибка: {error}</div>;\n  }\n\n  return (\n    <div className=\"flex flex-col min-h-full font-['Unbounded'] bg-white\">\n      \n      <main className=\"flex-grow flex flex-col items-center p-6 text-center\">\n\n        <Image\n                src={MY_ICON_PATH}\n                alt=\"Бонусный кристалл\"\n                width={180}\n                height={180}\n            />\n        \n        <h1 className=\"text-2xl text-black font-extrabold leading-tight mb-6\">\n          Приглашай<br />друзей и получай<br />плюсы\n        </h1>\n\n        {referrals.length > 0 && (\n          <div className=\"w-full max-w-sm mb-8\">\n            <h2 className=\"text-lg font-bold text-black mb-3 text-left\">Вы пригласили: {referrals.length}</h2>\n            <div\n              className=\"flex flex-nowrap items-center overflow-x-auto py-2 \n                         pl-1 pr-4\n                         space-x-[-16px]\n                         [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\n            >\n              {referrals.map((ref, index) => (\n                <Avatar\n                  key={ref.id}\n                  firstName={ref.first_name}\n                  lastName={ref.last_name}\n                  style={{ zIndex: referrals.length - index }}\n                />\n              ))}\n            </div>\n          </div>\n        )}\n\n      </main>\n      <footer className=\"w-full px-6 pb-6 flex-shrink-0\">\n        <button \n          onClick={handleInviteClick}\n          className=\"w-full h-16 flex items-center justify-center bg-red-500 text-white text-lg gap-2 font-medium rounded-2xl \n          transition-all\n          shadow-[0_6px_0_0_rgba(0,0,0,0.3)] \n          active:translate-y-1 active:shadow-[0_2px_0_0_rgba(0,0,0,0.3)]\">\n          <span>Пригласить друга</span>\n          <div \n            className=\"w-5 h-5 bg-white\"\n            style={iconMaskStyle(MY_ICON_PATH)} \n          />\n          <span>500</span>\n        </button>\n      </footer>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}